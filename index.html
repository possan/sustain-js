<html>
<head>
	<script src="sustain.js"></script>
	<style>

		button {
			font-size: 500%;
		}

	</style>
</head>
<body>
	<p>WebAudio Sustain-loop test (hold buttons) - <a href="https://github.com/possan/sustain-js">fork it</a> - by <a href="https://twitter.com/possan">@possan</a></p>
	<p><button id="drumroll">DRUMROLL</button></p>
	<p><button id="sheeit">SHEEIT</button></p>

	<script>

		var context = new webkitAudioContext();

		var loop1 = new SustainFile(context);
		var player1 = new SustainPlayer(context, loop1);
		loop1.load('drumroll.mp3', 15000, 32000, false);
		var button1 = document.getElementById('drumroll');
		button1.addEventListener('mousedown', function() {
			player1.attack();
		});
		button1.addEventListener('mouseup', function() {
			player1.release();
		});
		player1.connect(context.destination);

		var loop2 = new SustainFile(context);
		var player2 = new SustainPlayer(context, loop2);
		loop2.load('sheeit.mp3', 40000, 70000, true);
		var button2 = document.getElementById('sheeit');
		button2.addEventListener('mousedown', function() {
			player2.attack();
		});
		button2.addEventListener('mouseup', function() {
			player2.release();
		});
		player2.connect(context.destination);

	</script>
</body>
</html>